schema: "https://schema.org/TechnicalDocument"
id: "agent-comm-schema-001"
version: "1.0.0"
last_updated: "2024-05-17T00:00:00Z"
status: "Active"
priority: "P0"
owner: "Documentation Team"

message_schema:
  required_fields:
    id:
      type: string
      description: "Unique identifier for the message"
      format: uuid
    timestamp:
      type: string
      description: "ISO-8601 timestamp of message creation"
      format: date-time
    sender:
      type: string
      description: "Identifier of the sending agent"
    type:
      type: string
      description: "Type of message"
      enum:
        - test_request
        - test_result
        - status_update
        - context_update
    content:
      type: object
      description: "Message-specific content"
    status:
      type: string
      description: "Current status of the message"
      enum:
        - pending
        - processed
        - failed

message_types:
  test_request:
    required_fields:
      test_type:
        type: string
        description: "Type of test to execute"
      test_file:
        type: string
        description: "Path to test file"
      parameters:
        type: object
        description: "Test parameters"
        properties:
          environment:
            type: string
            description: "Test environment"
          verbose:
            type: boolean
            description: "Verbose output flag"

  test_result:
    required_fields:
      test_id:
        type: string
        description: "ID of the test request"
      status:
        type: string
        description: "Test execution status"
        enum:
          - passed
          - failed
          - error
      logs:
        type: array
        description: "Test execution logs"
        items:
          type: string
      artifacts:
        type: object
        description: "Test artifacts"
        properties:
          path:
            type: string
            description: "Path to artifact"
          type:
            type: string
            description: "Type of artifact"

  status_update:
    required_fields:
      agent_id:
        type: string
        description: "Identifier of the agent"
      state:
        type: string
        description: "Current state of the agent"
      progress:
        type: number
        description: "Progress percentage"
        minimum: 0
        maximum: 100

  context_update:
    required_fields:
      context_id:
        type: string
        description: "Identifier of the context"
      type:
        type: string
        description: "Type of context update"
        enum:
          - add
          - update
          - remove
      data:
        type: object
        description: "Context data"

file_schema:
  required_fields:
    messages:
      type: array
      description: "Array of messages"
      items:
        $ref: "#/message_schema"
    last_updated:
      type: string
      description: "Last update timestamp"
      format: date-time
    version:
      type: string
      description: "Schema version" 